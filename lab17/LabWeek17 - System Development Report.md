# LabWeek17 - System Development Report

# 0 人员介绍

| 姓名                 | 学号     |      | 姓名   | 学号     |
| -------------------- | -------- | ---- | ------ | -------- |
| 劳倩茹（版本管理员） | 18340086 |      | 吴天   | 19334019 |
| 刘思然               | 19335141 |      | 赖奕恺 | 19335093 |

# 1 引言

## 1.1 系统概述

一款应用于人工智能(AI)教学的**在线评测与游戏网站**。

本系统以人工智能技术教学作为核心功能开展，用户可以通过网站上的指导教学来学习和实现各类统计学习、深度学习、强化学习等人工智能领域算法，并将所学的知识应用于多种有趣的游戏进行实践。项目提供给用户通过编写AI通关游戏和收集成就、多用户通过编写和优化AI进行对战和排名、基于博客社区的知识的扩展与分享等产品形态，从而帮助用户在更愉快、轻松的氛围中更深刻的理解和学习人工智能知识。

本系统由本软件工程开发小组开发完成，暂无投资方，所有开发费用由开发小组自行承担。本项目以阿里云服务器为主要负载服务器，开发、测试和维护耗时近3个月，所有主体功能已实现，项目的开发文档、使用文档均编写完毕，本项目运行网站已投入测试和使用。

## 1.2 文档概述

本文档的目的是详细地介绍人工智能(AI)教学在线评测与游戏网站的项目开发总结报告，总结项目完整的开发流程和过程，以便投资方了解产品详细的设计与实现过程，方便后续开发人员对整个项目的使用指南和理解。本文将结合文字描述，对所引用的文件、实际的开发结果进行描述，其中包括对产品的主要功能和性能、关键的功能模块运行的基本流程、开发工作相关的评价等。本文档的预期读者是投资方、开发人员和维护人员，以及跟该项目相关的其他工作人员，此文档对用户私密的。

## 1.3 标识

- 浏览器：谷歌浏览器、IE9+、火狐浏览器
- 网站名：AILearn
- 版本号：1.0.1.220602_Gamma

# 2 引用文件

- GB/T 8567-2006 计算机软件文档编制规范
- GB/T 8567-1988 计算机软件产品开发文件编制指南
- IEEE 1016-2009 - IEEE Standard for Information Technology--Systems Design--Software Design Descriptions
- Agile Manifesto https://agilemanifesto.org/iso/zhchs/manifesto.html

# 3 实际开发结果

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737155.gif)

## 3.1 产品

### 3.1.1 软件单元

#### 3.1.1.1 登录模块

**(a) 功能描述**

登录模块主要提供注册和登录两个功能,方便用户查看自己的历史使用情况，同时也方便网站管理用户，并为后续提供用户定制化服务奠定基础。
- 若用户选择登录，程序接收用户输入的用户名和密码，判断用户名是否和用户列表数据库中的某一条记录匹配并且密码相同，如果是，输出登录成功；否则，输出登录失败，并等待用户重新输入。
- 若用户选择注册，程序接收用户输入的新用户名和密码，判断用户名是否和用户列表数据库中的某一条记录匹配或者密码是否过于简单，如果是，输出注册失败，并等待用户重新输入；否则，输出注册成功。

**(b) 运行流程**

登录模块接收来自用户输入的信息和请求，包括用户名和密码字符串，注册或登录等信息，通过内部子程序的数据匹配和查询，返回给用户结果信息，指示登录或注册是否成功，其运行流程如下所示：

1. 若是登录请求，查询用户名和密码是否和已有的用户记录匹配。
   1. 若查询到匹配的用户记录，调用登录接口，返回登录成功信息。
   2. 否则，返回登录失败信息。

1. 若是注册请求，查询新用户名和已有的用户名记录是否匹配以及密码是否过于简单。
   1. 若新用户名和已有的用户名记录匹配或者密码过于简单，返回注册失败信息。
   2. 否则，调用注册接口，返回登陆成功信息。

运行流程图如下：

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737163.jpg)

**(c) 层次结构**

登录模块连接前端以及数据治理模块，它接收来自前端的请求，简单的逻辑处理后，向数据治理模块发出对应的查询请求，得到结果后再经过简单的逻辑处理，把结果信息返回给前端。

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737160.jpg)

**(d) 程序量说明**

1. 注册功能和登录功能设计的模块和消息的传递大致相同，故在此一同描述。

#### 3.1.1.2 前端模块

**(a) 功能描述**

前端页面模块即网站前台部分，是运行在PC端，移动端等浏览器上展现给用户浏览的网页。网页存储在Web服务器上，当用户需要查看网页时，浏览器将经历一系列过程，将网页渲染呈现给用户。前端页面模块主要管理与用户交互的功能。一方面， 前端页面模块将根据用户的输入，进行合法性检测，检测通过后给后端发送相应的请求，另一方面， 前端页面模块能够把从后端获取的结果呈现到各个页面上。

**(b) 运行流程**

首先，前端界面模块进行一定的并发控制：当请求数大于指定的阀值时，将剩余请求存起来，等待有请求请求完毕后，再推出。当满足并发压力下，前端模块接收来自用户输入的请求，通过一系列渲染过程，返回给用户可视化的页面展示。其运行流程如下所示：

Pre. 判读请求数是否大于指定的阀值

1. 若请求数不大于指定阈值

直接将所有用户请求都发送给后端。

1. 若请求数大于指定阈值
   1. 超过阈值的请求进行await，状态设置为pending。
   2. 如果有请求执行完毕就推出一个，将状态置为Fulfilled

运行流程图如下：

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737165.jpg)

**(c) 层次结构**

前端界面模块连接用户以及除数据治理模块的其他所有模块，它接收来自用户的请求，向除数据治理模块的其他模块发出对应的请求，并接收返回结果再展示给用户。

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737161.jpg)

**(d) 程序量说明**

1. 课程模块：201.68KB
2. 评测模块：104KB
3. 社区模块：347KB

#### 3.1.1.3 课程模块

**(a) 功能描述**

课程模块实现了多种多样的社区功能，主要包括：

- 学习者可以根据课程ID加入到由特定教学者创建的课程中进行学习；也可以通过自由搜索、选择其他教学者用户发布的网课视频进行自由学习。
- 学习者可以管理自己加入的课程列表，包括对课程进行删除、评分等功能。
- 学习者在加入课程后，可以根据教学者的要求提交作业，并得到来自教学者的批改反馈。
- 学习者可以根据教学者的要求，参加教学者建立的考试进行水平检测。

**(b) 运行流程**

课程模块接收来来自用户对课程系统的不同操作请求，通过内部子程序的相互协作完成操作，返回给用户对应的操作结果，其运行流程如下所示：

1. 课程模块持续监听，接收请求
2. 前端模块接收来自用户的操作，将请求发送给课程模块
3. 课程模块将请求在链表上排队
4. 检查程序对当前请求和已调度请求进行死锁检查
5. 调度进程池的空闲进程来处理请求
6. 向数据治理模块发出对应的数据请求
7. 根据用户权限和请求数据等信息完成操作请求
8. 返回给用户对应的状态信息

运行流程图如下：

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737179.gif)

**(c) 层次结构**

课程模块与前端模块、数据治理模块进行通信交互，相互查询和交换数据信息。此外，课程模块具备死锁检查子程序，进程调度子程序，进程池维护子程序，交互通信子程序，业务逻辑子程序等等，它们彼此的相互合作，完成了接收来自用户的操作请求，返回给用户相应的状态信息。

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737288.jpg)

**(d) 程序量说明**

1. 死锁检测、进程调度、进程池和通讯子模块在各个模块间共享。

#### 3.1.1.4 评测模块

**(a) 功能描述**

评测模块主要提供对代码文件进行评测并返回结果的功能。针对用户提交的代码文件，评测模块会把代码文件分配给一个评测节点，评测节点会对代码进行评测，如果没有编译错误，返回代码的评分以及AI游戏的控制序列，评分直接返回给前端，而控制序列发送给游戏引擎方便其显示画面；否则返回编译错误。

**(b) 运行流程**

评测模块接收来来自用户输入的代码文件，通过内部子程序的OJ程序进行判题，返回给用户对应的代码的运行结果或是对应的可视化，其运行流程如下所示：

1. 评测服务器接收到代码文件后会进行基本的检查，然后放入消息队列。
2. 消息队列中的评测请求会由评测节点进行处理。
3. 评测节点会返回评测结果：
   1. 若出现编译错误，返回出错信息。
   2. 否则，返回分数和动作序列，分数直接返回给前端，动作序列发送到游戏引擎。

运行流程图如下：

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737309.jpg)

**(c) 层次结构**

评测模块接收来自前端的请求，简单的逻辑处理后，调用评测节点完成评测结果。根据评测结果，向数据治理模块发出对应的修改用户数据的请求。最后把评测分数返回给前端，并把游戏的动作序列发送给游戏引擎。

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737348.jpg)

**(d) 程序量说明**

1. 消息队列用于缓冲请求，以缓冲可能的短时间内的大量提交。

#### 3.1.1.5 社区模块

**(a) 功能描述**

社区模块实现了多种多样的社区功能，其主要包括：

- 用户发表和管理自己的博客，查看和评论他人的博客，搜索特定的博客
- 用户建立话题，发起自己问题，回答他人的问题
- 热门话题、博客、问答推荐
- 收藏、关注、分享他人的博客、问答等

以上的这些功能我们用统一的端到端模式进行实现，不同的功能操作我们视为具有特定标识的输入。用户发起操作后，对应的操作请求被发送给社区模块，由社区模块内部的子程序完成详细实现，包括与其他模块的交互（例如和数据治理模块的交互：请求新数据、将数据写入数据库等等），权限的变更，状态的更新等等。社区模块完成操作后，返回对应的提示信息，来提示用户操作成功或失败。

**(b) 运行流程**

社区模块接收来来自用户对社区系统的不同操作请求，通过内部子程序的相互协作完成操作，返回给用户对应的状态信息，其运行流程如下所示：

1. 社区模块持续监听，接收请求
2. 前端模块接收来自用户的操作，将请求发送给社区模块
3. 社区模块将请求在链表上排队
4. 检查程序对当前请求和已调度请求进行死锁检查
5. 调度进程池的空闲进程来处理请求
6. 向数据治理模块发出对应的数据请求，和其他模块进行交互
7. 根据用户权限和请求数据等信息完成操作请求
8. 返回给用户对应的状态信息

运行流程图如下：

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737349.gif)

**(c) 层次结构**

社区模块与登录模块、前端模块、数据治理模块进行通信交互，相互查询和交换数据信息。在社区模块内部，它具备死锁检查子程序，进程调度子程序，进程池维护子程序，交互通信子程序，业务逻辑子程序等等，它们彼此的相互合作，完成了接收来自用户的操作请求，返回给用户相应的状态信息。

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737358.gif)

**(d) 代码量说明**

1. 社区模块即可以被用户的请求调用，也可以和其他模块通信。

#### 3.1.1.6 数据治理模块

**(a) 功能描述**

数据治理模块是本项目中所有数据库的顶层管理者。实际上，无论是评测模块、社区模块等等都需要对数据库进行数据请求，为了避免出现越权访问、多模块同步访问冲突等严重问题，我们采取数据治理模块进行数据隔离，数据治理模块时刻对消息端口进行监听，接收来自其他模块的数据请求并存放在多个优先级队列中，然后数据治理模块根据优先级从队列中取出请求进行处理，首先进行合法性检验，对于检验通过的请求，数据治理模块异步的向对应的数据库发出查询SQL语句，之后异步的处理其他的请求，直到数据库发回对应的数据后，数据治理模块返回给其他的模块。

**(b) 运行流程**

数据治理模块接收来自其他模块的数据请求，返回给其他模块所请求的数据，其运行流程如下所示：

1. 数据治理模块持续监听，接收消息
2. 将接收到的来自其他模块的数据请求存放在多优先级队列中
3. 不断的根据优先级从队列中取出消息进行合法性检查
4. 对于检测合法的请求，向对应的数据库异步发出查询请求
5. 返回其他模块所请求的数据

运行流程图如下：

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737369.gif)

**(c) 层次结构**

数据治理模块连接所有其他模块以及数据库服务器，它接收来自其他模块的请求，向数据库发出对应的请求，进而数据库将对应的数据返回给其他模块。

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737008.gif)

**(d)** **代码量说明**

1. Data Governance/Manage Module: 数据治理模块

### 3.1.2 版本管理

因为系统的体量比较少，本系统一共有两个版本，分别标记为v1和v2。

- v1版本主要用于各模块之间的调试和使用测试。仍然有不少瑕疵，甚至有明显的bug，而且并没有很好地考虑用户体验，主要只是用于快速实现一个原型。
- v2版本是投入使用的部署版本。v2版本在v1版本的基础上进行进一步改进，修复了一些明显的bug，并且修改了前端界面，增加了更多的使用说明，大大提升了用户体验。

### 3.1.3 数据库开发

我们针对项目的功能、机制，用户的不同特点等关键信息建立了不同的数据库，这些数据库之间相互协调、协作和通信，完整的构建了整个项目的数据逻辑。其完整的UML类图如下所示。

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737018.gif)

#### 3.1.3.1 用户信息数据库

1. 记录类型：

构建用户数据库用来存储每个用户的最基本身份信息，包括其个人资料、账号密码信息等等，用来帮助系统对其进行身份识别、账号登入、权限修改等等。在用户数据库中，每条记录维护了一个用户的个人信息，其中每种个人信息设定为字符串类型，每条记录设定为由多个字符串组合的复合结构体类型。

1. 组成字段：

每条记录由多个字段组成，包括如下
\
| 字段说明 | 类型   | 字段说明   | 类型   |
| -------- | ------ | ---------- | ------ |
| 账号信息 | String | 用户昵称   | String |
| 密码信息 | String | 用户邮箱   | String |
| 用户手机 | String | 实名认证   | String |
| 账户余额 | String | 学校       | String |
| 用户类型 | String | 学号(工号) | String |
| 关联项目 | Ptr    |            |        |

#### 3.#####3.2 课程数据库

##### 记录类型

课程数据库维护了每个用户所加入或创建的课程信息，并对关键的数据进行了保存和维护。每条记录代表一个用户所关联的课程信息。每条记录由复合结构体类型组成。

##### 组成字段

| 字段说明   | 类型         | 字段说明 | 类型 |
| ---------- | ------------ | -------- | ---- |
| 课程列表   | List         | 课程考试 | Int  |
| 课程编号   | Int          |          |      |
| 课程创建者 | String       |          |      |
| 课程加入者 | List<String> |          |      |
| 课程文件   | List<Ptr>    |          |      |
| 课程作业   | List<Ptr>    |          |      |

其中List代表多个相同数据类型组成的列表，Ptr代表指向文件数据库的索引/指针

#### 3.1.3.3 考试数据库

##### 记录类型

考试数据库维护了考试功能所关联的全部数据信息。每条记录代表一场考试的信息，由复合结构体类型组成。

##### 组成字段

| 字段说明 | 类型         | 字段说明     | 类型         |
| -------- | ------------ | ------------ | ------------ |
| 考试编号 | Int          | 考试排名     | List<String> |
| 考生名单 | List<String> | 考试次数     | Int          |
| 考生学号 | List<String> | 是否公布结果 | bool         |
| 考试题目 | File         |              |              |
| 考试答案 | File         |              |              |
| 考试结果 | File         |              |              |

#### 3.1.3.4 游戏数据库

##### 记录类型

游戏数据库记录了所有游戏的相关数据，以及包括各个参与用户的历史代码、游戏排名等等。每条记录代表一个游戏的信息。每条记录由复合结构体类型组成。

##### 组成字段

| 字段说明 | 类型      | 字段说明 | 类型         |
| -------- | --------- | -------- | ------------ |
| 游戏编号 | Int       | 排名信息 | List<String> |
| 游戏名称 | String    | 成就信息 | Ptr          |
| 游戏文件 | Ptr       | 用户     | List<String> |
| 历史代码 | List<Ptr> |          |              |
| 进度说明 | List<int> |          |              |

#### 3.1.3.5 竞赛数据库

##### 记录类型

竞赛数据库记录了所有竞赛所涉及的用户信息、排名信息等等。每条记录代表一场竞赛从竞赛报名、竞赛途中到竞赛结束、结果公开所产生的全部数据信息。每条记录由复合结构体类型组成。

##### 组成字段

| 字段说明 | 类型         | 字段说明 | 类型 |
| -------- | ------------ | -------- | ---- |
| 竞赛编号 | Int          | 竞赛题目 | File |
| 报名列表 | List<User>   | 竞赛评测 | Node |
| 筛选程序 | Ptr          | 评测程序 | Ptr  |
| 竞赛结果 | File         | 竞赛文件 | File |
| 排名信息 | List<String> |          |      |

其中Node代表竞赛所关联的程序评测节点

#### 3.1.3.6 博客数据库

##### 记录类型

博客数据库记录了用户发布的每条博客的相关信息。每条记录代表一篇博客的所有相关数据。每条记录由复合结构体类型组成。

##### 组成字段

| 字段说明     | 类型   | 字段说明 | 类型       |
| ------------ | ------ | -------- | ---------- |
| 博客编号     | int    | 发布时间 | Time       |
| 博客文件     | File   | 标签     | List<Enum> |
| 创作者       | String |          |            |
| 博客评论     | File   |          |            |
| 博客统计信息 | Dict   |          |            |

#### 3.1.3.7 项目数据库

##### 记录类型

项目数据库记录了每个开发者所提交、开发的项目信息。每条记录代表着一个项目所涉及的全部信息。每条记录由复合结构体类型组成。

##### 组成字段

| 字段说明 | 类型   | 字段说明 | 类型 |
| -------- | ------ | -------- | ---- |
| 项目编号 | int    | 项目代码 | Ptr  |
| 盈利信息 | Ptr    | 审核人员 | Int  |
| 项目描述 | Ptr    | 审核程序 | Ptr  |
| 开发日志 | File   |          |      |
| 开发者   | String |          |      |

#### 3.1.3.8 交易数据库

##### 记录类型

交易数据库记录了用户和平台每次的交易，每条交易均可为用户与平台的交易、用户与开发者之间的交易、平台与开发者之间的交易。每条记录维护了单条交易信息，其类型为复合结构体类型。

##### 组成字段

| 字段说明 | 类型   | 字段说明 | 类型   |
| -------- | ------ | -------- | ------ |
| 交易号   | Int    | 交易类型 | String |
| 付款方   | String | 支付渠道 | String |
| 收款方   | String | 交易金额 | Float  |
| 交易内容 | Ptr    |          |        |
| 交易时间 | Time   |          |        |

## 3.2 主要功能和性能

### 3.2.1 课程管理功能

1. 功能说明：学习者可以根据课程ID加入到由特定教学者创建的课程中进行学习；也可以通过自由搜索、选择其他教学者用户发布的网课视频进行自由学习。此外，学习者可以管理自己加入的课程列表，包括对课程进行删除、评分等功能。
2. 涉及用户：学习者、教学者
3. 系统实现：用户通过向系统发出加入课程的请求，系统收到请求后进行相应，在相关的数据库进行数据更新和修改，为用户打开加入课程的相关访问权限，在前端为用户提供课程的新URL链接和HTTP对象。
4. 课程管理序列图：![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737041.jpg)
5. 课程管理活动图：![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737058.gif)
6. 预期开发目标：已完全实现了课程管理功能，同时还超额实现了课程分类、课程收藏、课程视频、课程章节等等额外功能
6. 性能说明：在非高峰时间，用户的功能请求可在1秒内得到运行结果，高峰时段不超过2秒。其他如查询、下载学习资料等功能，在2秒内得到查询结果，高峰时段不超过3秒。

### 3.2.2 提交作业功能

1. 功能说明：学习者在加入课程后，可以根据教学者的要求提交作业，并得到来自教学者的批改反馈，同时可以根据不懂的地方对教学者发起提问。
2. 涉及用户：学习者、教学者
3. 系统实现：用户发出提交作业的请求后，系统建立ssh / http连接，接收来自用户的文件传输，根据相关用户信息将传输的文件在后端文件服务器进行存储，同时更新课程教师的文件访问权限和提示信息，并在前端响应用户，提示其成功提交或因网络问题传输失败等等。
4. 提交作业序列图：
![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737063.jpg)
5. 提交作业活动图：
![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737200.gif)
6. 预期开发目标：已完全实现了提交作业功能，同时还超额实现了实时结果、作业评论等额外功能
7. 性能说明：在非高峰时间，用户的功能请求可在1秒内得到运行结果，高峰时段不超过2秒。其他如查询、下载学习资料等功能，在2秒内得到查询结果，高峰时段不超过3秒。

### 3.2.3 课程考试功能

1. 功能说明：学习者可以根据教学者的要求，参加教学者建立的考试进行水平检测。
2. 涉及用户：学习者、教学者
3. 系统实现：用户发出加入考试的请求后，系统会用户的身份和权限进行检测，检查成功后。更新用户的临时权限，建立用户和考试页面的连接，此后用户即可在前端通过考试页面进行答题，答题结果通过通信协议传输给批改程序进行批改，最终结果反馈给教学者和学习者。
4. 课程考试序列图：![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737913.jpg)
5. 课程考试活动图
![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737920.gif) ![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737931.gif)
6. 预期开发目标：已完全实现了课程考试功能
7. 性能说明：在非高峰时间，用户的功能请求可在1秒内得到运行结果，高峰时段不超过2秒。其他如查询、下载学习资料等功能，在2秒内得到查询结果，高峰时段不超过3秒。

### 3.2.4 知识博客功能

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737933.gif)

1. 功能说明：我们期望建立一个交流社区，不管是学习者、教学者和开发者都可以自由发表知识博客，进行知识分享和交流；其他用户可以任意观看博客，并对博客进行留言评论，博客主也可以进行回复，从而实现对知识的交流共享。
2. 涉及用户：学习者、教学者、开发者
3. 系统实现：通过维护特定的文件服务器来保存交流社区的所有博客数据，用户发出发表博客的请求后，系统根据其请求传递给后端服务器，对相应的博客进行数据保存。用户搜索、浏览和评论博客都通过前端的对外接口进行请求，通过Https协议反馈对应的对象，对博客的评论通过对文件服务器博客数据的修改来实现。
4. 知识博客序列图：![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737944.jpg)
5. 知识博客活动图：![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737949.gif)
6. 预期开发目标：已完全实现了知识博客功能，同时还超额实现了博客分类，话题管理，博客收藏，博主关注，博评论等等额外功能
7. 性能说明：在非高峰时间，用户的功能请求可在1秒内得到运行结果，高峰时段不超过2秒。其他如查询、下载学习资料等功能，在2秒内得到查询结果，高峰时段不超过3秒。

### 3.2.5 游戏评测功能

1. 功能说明：项目实现了多种游戏副本的可评测化，用户可以根据所学进行实践，编写操作游戏人物的核心代码文件或者脚本文件，或是提交训练的关键代码，项目能够实时对代码进行评测，并反馈展示给用户提交代码的游戏实时效果，使得用户在学习中进行实践，通过编写AI来通关多种游戏。例如利用强化学习通关愤怒的小鸟、利用博弈论下棋、利于人工智能通过吃豆人游戏等等
2. 涉及用户：学习者
3. 系统实现：当用户修改代码提交评测后，系统将请求派发给评测服务器上的评测节点，判题程序对代码进行编译，并在执行器沙盒中执行，将输出结果反馈提交给前端，由前端反馈执行结果给用户查看。
4. 游戏评测序列图：![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737680.jpg)
5. 游戏评测活动图：![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737687.jpg)
6. 预期开发目标：已完全实现了游戏评测功能
7. 性能说明：在非高峰时间，用户代码评测可在3s内返回结果，高峰时段不超过5s返回结果。

### 3.2.6 教师授课功能

1. 功能说明：课程教师可以建立学习者群组，将课程资源（题目以及配套资料）推送至学习者或学习者群组；学习者则可以访问所属学习者群组和个人的受邀请课程资源。
2. 涉及用户：学习者、课程教师
3. 系统实现：课程教师向服务器发出指定课程加入指定学习者的请求，服务器在数据库中将学习者与该课程关联起来，之后学习者发出拉取已参与课程请求，服务器将检索数据库并将相应课程发往浏览器。
4. 教师授课序列图：
![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737688.jpg)
5. 教师授课活动图：![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737696.gif)
6. 预期开发目标：已完全实现了教师授课功能，同时还超额实现了课程录播等等额外功能
7. 性能说明：在非高峰时间，用户的功能请求可在1秒内得到运行结果，高峰时段不超过2秒。其他如查询、下载学习资料等功能，在2秒内得到查询结果，高峰时段不超过3秒。

### 3.2.7 盈利功能

1. 功能说明：对教师存储的私有资料进行收费，并设置保存时效。
2. 涉及用户：课程教师
3. 系统实现：在课程教师将教学资料以私有方式提交时，将从平台余额扣款，若余额不足则将调用支付宝的支付接口，支付成功后方可提交私有资料；另外，课程教师可以将资料的状态改为公开或私有。更改为私有则需要设定时长按月收费；更改为公开则退还剩余平台余额。平台周期性地触发时效检查，对私有时限过期的课程资源予以公开。
4. 盈利功能序列图：![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737701.jpg)
5. 预期开发目标：已完全实现了盈利功能，同时还超额实现了VIP功能，优惠券，邀请提现等等额外功能
6. 性能说明：在非高峰时间，用户的功能请求可在1秒内得到运行结果，高峰时段不超过2秒。其他如查询、下载学习资料等功能，在2秒内得到查询结果，高峰时段不超过3秒。

## 3.3 基本流程

本项目根据用户请求操作的类型不同，采取功能分离的开发特点，将实现用户请求的不同功能交付给不同的程序模块进行处理，详细的基本处理流程详见3.1产品介绍。

## 3.4 进度

**(1) 原计划进度：**

项目完成可分为三个大阶段、六个小阶段，大阶段为准备阶段，设计阶段和实现与测试阶段。

![img](https://typora-1304243409.cos.ap-guangzhou.myqcloud.com/SoftwareEngineering/lab17/202206101737706.gif)

准备阶段：第 7-11 周

- 需求分析阶段：小组成员具有AI背景，曾经和现在都是AI算法的学习者，能够站在使用者的角度充分思考用户需求，并且身边就有大量的潜在用户，即中山大学计算机系学生，有助于快速高效完成用户的调研。
- UML制图阶段：小组成员均在多门课程中绘制了大量的UML图，对UML有着清晰和深入的认识，熟练掌握UML制图工具，对基于UML的面向对象设计有着充分的了解，对基于UML的用户交互逻辑描述等均有一定的经验，有把握在规定时间内完成SRS到UML的转换。

设计阶段：第 11-15 周

- 架构设计阶段：目前已经有大量公司实践了互联网平台的搭建，并有着许多成功案例。得益于互联网的高度开放性，我们不仅可以借鉴这些公司的成功案例，还可以参考并使用大量开源社区的已成熟的组件。

- 详述设计阶段：小组成员具备互联网开发的具体经验，对互联网平台开发有相当理解。在本阶段完成项目关键模块的架构设计、数据管理。

实现与测试阶段：第 15-18 周

- 实现阶段：四名成员都经过3年的计算机专业训练，拥有丰富的计算机素养和良好的技术支持环境。在本阶段完成全部的项目代码实现。

- 测试阶段：团队拥有丰富的调试测试经验，并且借助成熟的单元测试框架和随机测试框架，能够快速的定位平台问题并解决问题。在本阶段完成全部项目功能的使用测试。

**(2) 实际进度**

| 开发阶段     | 预期计划  | 实际开发  | 对比情况 |
| ------------ | --------- | --------- | -------- |
| 需求分析阶段 | 第7-9周   | 第7-9周   | 按期完成 |
| UML制图阶段  | 第9-11周  | 第9-10周  | 提前完成 |
| 架构设计阶段 | 第11-13周 | 第10-12周 | 提前完成 |
| 详述设计阶段 | 第13-15周 | 第12-14周 | 提前完成 |
| 实现阶段     | 第15-17周 | 第14-17周 | 提前完成 |
| 测试阶段     | 第17-18周 | 第17-18周 | 按期完成 |

## 3.5 费用

1. 工时：原定计划 4人*3月 = 12人月，实际耗工时 4人*3月 = 12人月，与预期一致。
2. 计算机的使用时间：原定计划计算机的使用时间为本小组成员本学期课余时间，人均100h，实际使用计算机时间人均130h。开发之前没有认真地进行工作量的估计，实际花费在学习相关技术的时间较长。
3. 其他支出：主要是云服务器支出，根据2021年国内云服务器厂商腾讯云的报价，原定计划应用服务器在项目运维期间约为3480元。在开发过程中对云服务器配置重新考虑，并且云服务厂商提供优惠活动，实际云服务器支出为1998元。

# 4 开发工作评价

## 4.1 对生产效率的评价

|        | 程序的平均生产效率 | 文件的平均生产效率 |
| ------ | ------------------ | ------------------ |
| 原计划 | 200                | 10                 |
| 实际   | 180                | 8                  |

## 4.2 对产品质量的评价

每千条指令中的错误指令数不足3，说明在测试中检查出来的错误发生率较低，体现了产品稳定性较好，质量不错。

## 4.3 对技术方法的评价

### 4.3.1 技术评价

开发过程中主要采用：

- 主流的轻量级的web前后端框架，比如flask和react。非常适合小型团队快速进行迭代开发，并且具有非常高的灵活性。
- 核心逻辑采用主流的语言，比如python。非常易于快速实现，且生产环境较为稳定，社区发达，保证了我们产品的稳定性。
- 后端部署采用docker+gunicorn+gevent。docker简化了部署操作，并且使得产品具有很强的可移植性。gunicorn+gevent提供了高并发服务器的功能。

综上，所采用技术非常符合团队自身的开发情况。

### 4.3.2 方法评价

开发过程主要采用敏捷开发和增量迭代的方法，符合小型团队开发创新型产品的特点。

### 4.3.3 工具评价

开发过程中使用的工具主要是团队成员自身的笔记本电脑以及一台云服务器，方便实用。

### 4.3.4 手段评价

采用前后端分离、多线程并发等成熟的开发手段，满足产品的功能需求的同时也极大地保证了开发产品的稳定性。

## 4.4 出错原因的分析

开发过程中出现的最主要的错误是低估了开发产品的工作量，导致最后并没能实现计划的所有功能。

出现错误的原因主要在于小组成员此前都没有互联网产品的开发经验，不熟悉其中的技术以及坑，导致开发过程进展没有预期快，最后导致只能舍弃一些非核心功能。

## 4.5 风险管理

### 4.5.1 初期预计的风险

初期预计的风险主要在于金钱成本上，因为购置一台服务器并搭建起网络需要花费大量的成本。

### 4.5.2 实际发生的风险

由于我们进行了足够的调研，最后我们采用了按需付费租用云服务器的方案来规避掉大量的金钱付出，所以规避掉了成本风险。

但是开发过程中，由于低估了开发产品的工作量，所以出现了可能无法按时交付完整产品的风险。

### 4.5.3 风险消除的情况

在出现可能无法按时交付完整产品的风险时，小组及时讨论，根据功能的重要性、实现难度、是否具有特点等方面进行逐一讨论，最后筛选掉一些不影响产品整体形态的不重要的附加功能，从而最后得以及时交付完整产品。

# 5 经验和教训

1. 编程由小及大。应该从一个最简单的版本或者功能开始，然后逐步延伸，直达达到预期目的为止。
2. 很难估计功能将花费多少时间。在开发软件时，遇到意外问题是很常见的：简单的合并会导致细微的错误，或者API调用无法按预期进行，无论投入多少精力，总会有bug。
1. 进行科学的调试。第一步就是重现问题，然后测试假设：使用日志、断点、断言，如果通过验证，修复并确保没有新错误。

# 6 注解

| 术语、简写和缩略语 | 解释                                                         |
| ------------------ | ------------------------------------------------------------ |
| Docker             | Docker用于对进程进行封装隔离，属于操作系统层面的虚拟化技术   |
| Flask              | Flask是具备的扩展性和兼容性的web开发框架                     |
| Gevent             | Gevent是一个基于协程的Python网络库，它使用greenlet在libev或libuv事件循环之上提供高级同步API |
| Gunicorn           | Gunicorn是一个unix上被广泛使用的高性能的Python WSGI UNIX HTTP Server |
| HTTP               | HyperText Transfer Protocol，超文本传输协议                  |
| React              | React是用于构建用户界面的JavaScript库                        |